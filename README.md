# AI ìê¸°ì†Œê°œì„œ ë¶„ì„ í”„ë¡œì íŠ¸ ğŸ¤–

ì‹¤ì œ ê°œë°œ í™˜ê²½ êµ¬ì¶• ê³¼ì •ê³¼ íŒì„ ê³µìœ í•©ë‹ˆë‹¤. WSL2 í™˜ê²½ì—ì„œ Hugging Face ëª¨ë¸ì„ ì†ì‰½ê²Œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤.

> ë³¸ í”„ë¡œì íŠ¸ì˜ ê°œë°œ í™˜ê²½ ì„¤ì • ê°€ì´ë“œëŠ” í…Œë””ë…¸íŠ¸ë‹˜ì˜ ì‘ì—…ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. 

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ê°œë°œ ì˜ë„
ì´ í”„ë¡œì íŠ¸ëŠ” ì·¨ì—… ì¤€ë¹„ìƒë“¤ì´ ë” íš¨ê³¼ì ì¸ ìê¸°ì†Œê°œì„œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë•ê¸° ìœ„í•´ ê°œë°œë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì—…ë³„ í•©ê²© ìê¸°ì†Œê°œì„œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§ì¶¤í˜• í”¼ë“œë°±ê³¼ ê°œì„  ë°©í–¥ì„ ì œê³µí•¨ìœ¼ë¡œì¨, ì·¨ì—… ì¤€ë¹„ìƒë“¤ì˜ ìê¸°ì†Œê°œì„œ ì‘ì„± ê³¼ì •ì„ ì§€ì›í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥
í•©ê²© ìê¸°ì†Œê°œì„œ ì œê³µ: ê¸°ì—…ë³„/ì§ë¬´ë³„ í•©ê²© ìê¸°ì†Œê°œì„œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ì£¼ìš” í‚¤ì›Œë“œì™€ íŒ¨í„´ì„ íŒŒì•…
ë§ì¶¤í˜• í”¼ë“œë°± ì œê³µ: ì‚¬ìš©ìê°€ ì‘ì„±í•œ ìê¸°ì†Œê°œì„œë¥¼ ë¶„ì„ ë° í•©ê²© ìê¸°ì†Œê°œì„œì˜ ì°¸ê³ í• ì ,ê°œì„ ì ê³¼ ì œê³µ
AI ê¸°ë°˜ ìê¸°ì†Œê°œì„œ ê°œì„  ì œì•ˆ: Gemma 2B-IT ëª¨ë¸ì„ í™œìš©í•˜ì—¬ ë” íš¨ê³¼ì ì¸ í‘œí˜„ê³¼ êµ¬ì„±ì„ ì œì•ˆ

### ê¸°ìˆ ì  ì ‘ê·¼
- WSL2ì™€ CUDAë¥¼ í™œìš©í•œ ê³ ì„±ëŠ¥ ì¶”ë¡  í™˜ê²½ êµ¬ì¶•
- LangChainê³¼ LangServeë¥¼ í™œìš©í•œ í™•ì¥ ê°€ëŠ¥í•œ API ì„œë¹„ìŠ¤ êµ¬í˜„
- Hugging Faceì˜ Gemma 2B-IT ëª¨ë¸ì„ ê²½ëŸ‰í™”ëœ GGUF í˜•ì‹ìœ¼ë¡œ ìµœì í™”
- RAG(Retrieval-Augmented Generation) ì•„í‚¤í…ì²˜ë¥¼ í™œìš©í•œ ë§¥ë½ ê¸°ë°˜ ë¶„ì„ êµ¬í˜„
- ngrokì„ í™œìš©í•œ ì•ˆì „í•œ API ì—”ë“œí¬ì¸íŠ¸ ì œê³µ

> í•´ë‹¹ UIëŠ” https://github.com/eFOROW/EmpAI ì´ê³³ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.

## ê°œë°œ í™˜ê²½ ì„¸íŒ…í•˜ê¸° 

### ğŸ”§ í•„ìˆ˜ í™˜ê²½ (í…ŒìŠ¤íŠ¸ ì™„ë£Œ ë²„ì „)
- Python 3.10
- PyTorch 2.5.1
- CUDA 11.8
- cuDNN 9.1.0

### CUDA & PyTorch ì„¤ì •
> ğŸ’¡ CUDA ì„¤ì •ì´ ê¹Œë‹¤ë¡œìš¸ ìˆ˜ ìˆëŠ”ë°, [ì´ ë¸”ë¡œê·¸](https://limitsinx.tistory.com/317)ë¥¼ ì°¨ê·¼ì°¨ê·¼ ë”°ë¼í•˜ì‹œë©´ ë©ë‹ˆë‹¤!

CUDAê°€ ì œëŒ€ë¡œ ì„¤ì¹˜ëëŠ”ì§€ í™•ì¸í•˜ë ¤ë©´:
```bash
nvcc -V
```

ì•„ë˜ì™€ ê°™ì€ ì¶œë ¥ì´ ë‚˜ì™€ì•¼ ì •ìƒì…ë‹ˆë‹¤:
```
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2022 NVIDIA Corporation
Built on Wed_Sep_21_10:33:58_PDT_2022
Cuda compilation tools, release 11.8, V11.8.89
Build cuda_11.8.r11.8/compiler.31833905_0
```

## WSL2ë¡œ ê°œë°œí•˜ê¸°

Hugging Face ëª¨ë¸ì„ ë” í¸í•˜ê²Œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ WSL2 í™˜ê²½ì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. Windowsì—ì„œ ì§ì ‘ ì„¤ì •í•˜ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ìˆ˜ì›”í•©ë‹ˆë‹¤.

### Gemma 2B-IT ëª¨ë¸ ì„¤ì¹˜í•˜ê¸°

#### GGUF íŒŒì¼ í˜•ì‹ì— ëŒ€í•´
GGUFëŠ” ë”¥ëŸ¬ë‹ ëª¨ë¸ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê³  ë°°í¬í•˜ê¸° ìœ„í•œ ìƒˆë¡œìš´ íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤. ê¸°ì¡´ ëª¨ë¸ ì €ì¥ ë°©ì‹ë“¤ì˜ í˜¸í™˜ì„± ë¬¸ì œë¥¼ í•´ê²°í–ˆì£ .

#### ëª¨ë¸ ë‹¤ìš´ë¡œë“œ ë°©ë²•
Hugging Faceì—ì„œ í¸í•˜ê²Œ ë‹¤ìš´ë°›ëŠ” ë°©ë²•:
```bash
huggingface-cli download \
  [í—ˆê¹…í˜ì´ìŠ¤ ggufì €ì¥ì†Œ ì´ë¦„] \
  [ë‹¤ìš´ë°›ì„ gguf íŒŒì¼ëª…] \
  --local-dir [ë‹¤ìš´ë¡œë“œ_ê²½ë¡œ] \
  --local-dir-use-symlinks False
```

> ğŸ’¡ **Tip**: `symlinks=False` ì„¤ì •ì€ íŒŒì¼ì„ ì§ì ‘ ë³µì‚¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë™ì‘í•´ì„œ ì‹œìŠ¤í…œ í˜¸í™˜ì„± ë¬¸ì œë¥¼ í”¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### Ollama ëª¨ë¸ ë“±ë¡
```bash
ollama create [ë“±ë¡í• _ì´ë¦„] -f [Modelfile_ê²½ë¡œ]
```

## API ì„œë²„ êµ¬ì„±í•˜ê¸°

### LangServeë¡œ API ë§Œë“¤ê¸°
LangChainìœ¼ë¡œ ë§Œë“  LLM Chainì„ APIë¡œ ì†ì‰½ê²Œ ë°°í¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Flaskë‚˜ FastAPIë¡œ ì§ì ‘ êµ¬ì„±í•  í•„ìš” ì—†ì´, LangServeê°€ ì œê³µí•˜ëŠ” ë„êµ¬ë¡œ ê°„í¸í•˜ê²Œ ë°°í¬ ê°€ëŠ¥í•©ë‹ˆë‹¤.

### ngrokìœ¼ë¡œ ì™¸ë¶€ ì ‘ì† í—ˆìš©í•˜ê¸°
ë¡œì»¬ì—ì„œ ëŒì•„ê°€ëŠ” ì„œë²„ë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ì† ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ë„êµ¬ì…ë‹ˆë‹¤.

#### ì„¤ì¹˜ ë°©ë²•
1. [ngrok ì„¤ì¹˜ í˜ì´ì§€](https://dashboard.ngrok.com/get-started/setup/linux)ì—ì„œ ë³¸ì¸ ìš´ì˜ì²´ì œì— ë§ëŠ” ë²„ì „ì„ ì„ íƒ
2. ì•ˆë‚´ëŒ€ë¡œ ì„¤ì¹˜í•˜ë©´ ë!

#### ì‚¬ìš© ë°©ë²•
ë¡œì»¬ ì„œë²„ í¬ì›Œë”©í•˜ê¸°:
```bash
ngrok http http://localhost:8080
```

ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì£¼ì†Œê°€ ìƒì„±ë©ë‹ˆë‹¤:
```
https://cicada-musical-donkey.ngrok-free.app
```
ì´ ì£¼ì†Œë¡œ API í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

> âš ï¸ **ì£¼ì˜ì‚¬í•­**: 
> - Ctrl+Cë¡œ ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ë„ë©”ì¸ì´ ë°”ë€ë‹ˆë‹¤
> - ë¬´ë£Œ ê³„ì •ì€ ê³ ì • ë„ë©”ì¸ í•˜ë‚˜ë¥¼ ì œê³µí•˜ë‹ˆ, ì²˜ìŒ ìƒì„±ëœ static domainì„ ì‚¬ìš©í•˜ì„¸ìš”

## ì‹¤ì œ ì‹¤í–‰í•˜ê¸°

1. ngrok ì‹¤í–‰
2. ì„œë²„ ì½”ë“œ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
3. `python server.py` ì‹¤í–‰

## ìê¸°ì†Œê°œì„œ ë°ì´í„° ì¤€ë¹„
CSV í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¤€ë¹„í•´ì•¼ í•©ë‹ˆë‹¤. ë°ì´í„° ìˆ˜ì§‘ í›„ ì „ì²˜ë¦¬ ì‘ì—…ì„ ê±°ì³ ì§€ì •ëœ ì–‘ì‹ì— ë§ì¶°ì£¼ì„¸ìš”.

## ğŸ¤ ë„ì›€ì´ í•„ìš”í•˜ë‹¤ë©´
- CUDAë‚˜ PyTorch ì„¤ì¹˜ì—ì„œ ë§‰íŒë‹¤ë©´ -> [ë¸”ë¡œê·¸ ê°€ì´ë“œ](https://limitsinx.tistory.com/317) ì°¸ê³ 
- WSL2 ì„¤ì¹˜ê°€ ì•ˆ ëœë‹¤ë©´ -> Windows ë²„ì „ í™•ì¸
- ngrok ì—°ê²°ì´ ì•ˆ ëœë‹¤ë©´ -> í¬íŠ¸ ë²ˆí˜¸ í™•ì¸
- í•´ë‹¹ ë‚´ìš©ì„ ì„¸ì„¸í•˜ê²Œ ì˜ìƒ ê°•ì˜ë¡œ ë³´ê³ ì‹¶ë‹¤ -> https://python.langchain.com/docs/langserve/

## ğŸ“š ì°¸ê³  ìë£Œ
- [LangChain ê³µì‹ ë¬¸ì„œ - LangServe](https://python.langchain.com/docs/langserve/)
- [í…Œë””ë…¸íŠ¸ë‹˜ì˜ LangServe & Ollama ê°€ì´ë“œ](https://github.com/teddylee777/langserve_ollama)
